FROM nginx:latest

# Create directory and set permissions
RUN mkdir -p /staticfiles && chown -R nginx:nginx /staticfiles

# Remove default config
RUN rm /etc/nginx/conf.d/default.conf

# Copy config
COPY nginx.conf /etc/nginx/conf.d/default.conf

# Copy static files from local directory (built in previous step)
COPY staticfiles/ /staticfiles/

EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]